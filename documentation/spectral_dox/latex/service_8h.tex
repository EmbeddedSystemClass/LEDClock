\hypertarget{service_8h}{}\section{C\+:/\+Users/\+Jakub Wieczorek/\+Desktop/studia/\+S\+M\+S/spectral\+\_\+clock/code/\+Inc/service.h File Reference}
\label{service_8h}\index{C\+:/\+Users/\+Jakub Wieczorek/\+Desktop/studia/\+S\+M\+S/spectral\+\_\+clock/code/\+Inc/service.\+h@{C\+:/\+Users/\+Jakub Wieczorek/\+Desktop/studia/\+S\+M\+S/spectral\+\_\+clock/code/\+Inc/service.\+h}}


service header file.  


{\ttfamily \#include \char`\"{}stm32f1xx\+\_\+hal.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}pictures.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}stdbool.\+h\char`\"{}}\newline
\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{struct_l_e_d}{L\+ED}}
\begin{DoxyCompactList}\small\item\em struct represanting particular \mbox{\hyperlink{struct_l_e_d}{L\+ED}} instance with port and pin \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{struct_l_e_d___l_a_t_c_h}{L\+E\+D\+\_\+\+L\+A\+T\+CH}}
\begin{DoxyCompactList}\small\item\em struct represanting one of latches with port and pin also the array with leds instances \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{struct_e_n_g_i_n_e___t_i_m}{E\+N\+G\+I\+N\+E\+\_\+\+T\+IM}}
\begin{DoxyCompactList}\small\item\em struct represanting timer for counting the time of whole ratio \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{struct_p_i_c_t_u_r_e___t_i_m}{P\+I\+C\+T\+U\+R\+E\+\_\+\+T\+IM}}
\begin{DoxyCompactList}\small\item\em struct represanting timer for counting the time of leds switching on in smallest angle \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{struct_e_v_e_n_t_s}{E\+V\+E\+N\+TS}}
\begin{DoxyCompactList}\small\item\em events updated by particular callbacks. Directs the program execution. \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{struct_p_i_c_t_u_r_e}{P\+I\+C\+T\+U\+RE}}
\begin{DoxyCompactList}\small\item\em the picture displayed by leds \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{service_8h_a3bc85e390d8bdf7f1bd2c8ca4321f921}\label{service_8h_a3bc85e390d8bdf7f1bd2c8ca4321f921}} 
typedef struct \mbox{\hyperlink{struct_l_e_d}{L\+ED}} {\bfseries led\+\_\+t}
\item 
\mbox{\Hypertarget{service_8h_accad1fb87218fc5fbb9b9d48e393e449}\label{service_8h_accad1fb87218fc5fbb9b9d48e393e449}} 
typedef struct \mbox{\hyperlink{struct_l_e_d___l_a_t_c_h}{L\+E\+D\+\_\+\+L\+A\+T\+CH}} {\bfseries led\+\_\+latch\+\_\+t}
\item 
\mbox{\Hypertarget{service_8h_a74841e4e41881937399280ea91268409}\label{service_8h_a74841e4e41881937399280ea91268409}} 
typedef struct \mbox{\hyperlink{struct_e_n_g_i_n_e___t_i_m}{E\+N\+G\+I\+N\+E\+\_\+\+T\+IM}} {\bfseries engine\+\_\+tim\+\_\+t}
\item 
\mbox{\Hypertarget{service_8h_ac4c59e9cf70b4e13db53a00024206977}\label{service_8h_ac4c59e9cf70b4e13db53a00024206977}} 
typedef struct \mbox{\hyperlink{struct_p_i_c_t_u_r_e___t_i_m}{P\+I\+C\+T\+U\+R\+E\+\_\+\+T\+IM}} {\bfseries picture\+\_\+tim\+\_\+t}
\item 
\mbox{\Hypertarget{service_8h_a863c19c9c2f22633745ce44148219b15}\label{service_8h_a863c19c9c2f22633745ce44148219b15}} 
typedef struct \mbox{\hyperlink{struct_e_v_e_n_t_s}{E\+V\+E\+N\+TS}} {\bfseries events\+\_\+t}
\item 
\mbox{\Hypertarget{service_8h_ac96f7304a68ddcffc2e3a0bfaf6c185d}\label{service_8h_ac96f7304a68ddcffc2e3a0bfaf6c185d}} 
typedef struct \mbox{\hyperlink{struct_p_i_c_t_u_r_e}{P\+I\+C\+T\+U\+RE}} {\bfseries picture\+\_\+t}
\end{DoxyCompactItemize}
\subsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{service_8h_a7382d51d8dba53a32f99083d61a485af}\label{service_8h_a7382d51d8dba53a32f99083d61a485af}} 
enum \mbox{\hyperlink{service_8h_a7382d51d8dba53a32f99083d61a485af}{U\+P\+P\+E\+R\+\_\+\+L\+E\+DS}} \{ \newline
{\bfseries U9}, 
{\bfseries U8}, 
{\bfseries U7}, 
{\bfseries U6}, 
\newline
{\bfseries U5}, 
{\bfseries U4}, 
{\bfseries U3}, 
{\bfseries U1}
 \}
\begin{DoxyCompactList}\small\item\em leds for upper latch from up to down on schema \end{DoxyCompactList}\item 
\mbox{\Hypertarget{service_8h_a3aa13485ec3a3cfbf42e7f9fa42eff3d}\label{service_8h_a3aa13485ec3a3cfbf42e7f9fa42eff3d}} 
enum \mbox{\hyperlink{service_8h_a3aa13485ec3a3cfbf42e7f9fa42eff3d}{L\+O\+W\+E\+R\+\_\+\+L\+E\+DS}} \{ \newline
{\bfseries U32}, 
{\bfseries U30}, 
{\bfseries U28}, 
{\bfseries U25}, 
\newline
{\bfseries U24}, 
{\bfseries U22}, 
{\bfseries U20}, 
{\bfseries U17}
 \}
\begin{DoxyCompactList}\small\item\em leds for lower latch from up to down on schema \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{service_8h_a0471005c9a43a9287ead2b95df751f01}{latch\+\_\+data}} (\mbox{\hyperlink{struct_l_e_d___l_a_t_c_h}{led\+\_\+latch\+\_\+t}} a\+\_\+latch)
\begin{DoxyCompactList}\small\item\em latches states which are in leds array in led\+\_\+latch\+\_\+t instance \end{DoxyCompactList}\item 
void \mbox{\hyperlink{service_8h_a7d0d368b66c57ad37fa7ad07d429e438}{update\+\_\+leds}} (\mbox{\hyperlink{struct_p_i_c_t_u_r_e}{picture\+\_\+t}} a\+\_\+picture)
\begin{DoxyCompactList}\small\item\em sets information from the picture data into leds in particular latches \end{DoxyCompactList}\item 
void \mbox{\hyperlink{service_8h_a77b422fb885fa8f29fa7bf69677035a3}{update\+\_\+resolution\+\_\+time}} (\mbox{\hyperlink{struct_e_n_g_i_n_e___t_i_m}{engine\+\_\+tim\+\_\+t}} $\ast$a\+\_\+engine, \mbox{\hyperlink{struct_p_i_c_t_u_r_e___t_i_m}{picture\+\_\+tim\+\_\+t}} $\ast$a\+\_\+picture\+\_\+tim)
\begin{DoxyCompactList}\small\item\em updates resolution time \end{DoxyCompactList}\item 
void \mbox{\hyperlink{service_8h_af84ff48f1ea8053222ec3db499c1d37f}{change\+\_\+picture}} (uint8\+\_\+t a\+\_\+picture\+\_\+idx, \mbox{\hyperlink{struct_p_i_c_t_u_r_e}{picture\+\_\+t}} $\ast$a\+\_\+picture)
\begin{DoxyCompactList}\small\item\em change picture \textquotesingle{}A\textquotesingle{} -\/$>$ H\+A\+L\+F\+\_\+\+W\+H\+E\+EL \textquotesingle{}B\textquotesingle{} -\/$>$ C\+L\+O\+CK \textquotesingle{}C\textquotesingle{} -\/$>$ O\+N\+Y\+KS \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
service header file. 

\begin{DoxyAuthor}{Author}
Jakub Wieczorek \href{mailto:jakub.wieczorek0101@gmail.com}{\tt jakub.\+wieczorek0101@gmail.\+com} 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
10.\+06.\+2018 
\end{DoxyDate}
\begin{DoxyVersion}{Version}
1.\+0 
\end{DoxyVersion}


\subsection{Function Documentation}
\mbox{\Hypertarget{service_8h_af84ff48f1ea8053222ec3db499c1d37f}\label{service_8h_af84ff48f1ea8053222ec3db499c1d37f}} 
\index{service.\+h@{service.\+h}!change\+\_\+picture@{change\+\_\+picture}}
\index{change\+\_\+picture@{change\+\_\+picture}!service.\+h@{service.\+h}}
\subsubsection{\texorpdfstring{change\+\_\+picture()}{change\_picture()}}
{\footnotesize\ttfamily void change\+\_\+picture (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{a\+\_\+picture\+\_\+idx,  }\item[{\mbox{\hyperlink{struct_p_i_c_t_u_r_e}{picture\+\_\+t}} $\ast$}]{a\+\_\+picture }\end{DoxyParamCaption})}



change picture \textquotesingle{}A\textquotesingle{} -\/$>$ H\+A\+L\+F\+\_\+\+W\+H\+E\+EL \textquotesingle{}B\textquotesingle{} -\/$>$ C\+L\+O\+CK \textquotesingle{}C\textquotesingle{} -\/$>$ O\+N\+Y\+KS 


\begin{DoxyParams}{Parameters}
{\em a\+\_\+picture\+\_\+idx} & uint8\+\_\+t a\+\_\+picture\+\_\+idx above indexes \\
\hline
{\em a\+\_\+picture} & picture\+\_\+t a\+\_\+picture pointer to picture\+\_\+t instance it will be update in function \\
\hline
\end{DoxyParams}
\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{struct_p_i_c_t_u_r_e}{P\+I\+C\+T\+U\+RE}} 
\end{DoxySeeAlso}
\mbox{\Hypertarget{service_8h_a0471005c9a43a9287ead2b95df751f01}\label{service_8h_a0471005c9a43a9287ead2b95df751f01}} 
\index{service.\+h@{service.\+h}!latch\+\_\+data@{latch\+\_\+data}}
\index{latch\+\_\+data@{latch\+\_\+data}!service.\+h@{service.\+h}}
\subsubsection{\texorpdfstring{latch\+\_\+data()}{latch\_data()}}
{\footnotesize\ttfamily void latch\+\_\+data (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_l_e_d___l_a_t_c_h}{led\+\_\+latch\+\_\+t}}}]{a\+\_\+latch }\end{DoxyParamCaption})}



latches states which are in leds array in led\+\_\+latch\+\_\+t instance 


\begin{DoxyParams}{Parameters}
{\em led\+\_\+latch\+\_\+t} & a\+\_\+latch \mbox{\hyperlink{struct_l_e_d___l_a_t_c_h}{L\+E\+D\+\_\+\+L\+A\+T\+CH}} instance \\
\hline
\end{DoxyParams}
\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{struct_l_e_d___l_a_t_c_h}{L\+E\+D\+\_\+\+L\+A\+T\+CH}} 
\end{DoxySeeAlso}
\mbox{\Hypertarget{service_8h_a7d0d368b66c57ad37fa7ad07d429e438}\label{service_8h_a7d0d368b66c57ad37fa7ad07d429e438}} 
\index{service.\+h@{service.\+h}!update\+\_\+leds@{update\+\_\+leds}}
\index{update\+\_\+leds@{update\+\_\+leds}!service.\+h@{service.\+h}}
\subsubsection{\texorpdfstring{update\+\_\+leds()}{update\_leds()}}
{\footnotesize\ttfamily void update\+\_\+leds (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_p_i_c_t_u_r_e}{picture\+\_\+t}}}]{a\+\_\+picture }\end{DoxyParamCaption})}



sets information from the picture data into leds in particular latches 


\begin{DoxyParams}{Parameters}
{\em picture\+\_\+t} & a\+\_\+picture picture\+\_\+t instance \\
\hline
\end{DoxyParams}
\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{struct_p_i_c_t_u_r_e}{P\+I\+C\+T\+U\+RE}} 
\end{DoxySeeAlso}
\mbox{\Hypertarget{service_8h_a77b422fb885fa8f29fa7bf69677035a3}\label{service_8h_a77b422fb885fa8f29fa7bf69677035a3}} 
\index{service.\+h@{service.\+h}!update\+\_\+resolution\+\_\+time@{update\+\_\+resolution\+\_\+time}}
\index{update\+\_\+resolution\+\_\+time@{update\+\_\+resolution\+\_\+time}!service.\+h@{service.\+h}}
\subsubsection{\texorpdfstring{update\+\_\+resolution\+\_\+time()}{update\_resolution\_time()}}
{\footnotesize\ttfamily void update\+\_\+resolution\+\_\+time (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_e_n_g_i_n_e___t_i_m}{engine\+\_\+tim\+\_\+t}} $\ast$}]{a\+\_\+engine,  }\item[{\mbox{\hyperlink{struct_p_i_c_t_u_r_e___t_i_m}{picture\+\_\+tim\+\_\+t}} $\ast$}]{a\+\_\+picture\+\_\+tim }\end{DoxyParamCaption})}



updates resolution time 

the most important part of the processing. Basing on time from engine timer (ratio time) the resoltion time is counting. It is in every read from callback feedback from gpio input by phototransisor sensor. 
\begin{DoxyParams}{Parameters}
{\em engine\+\_\+tim\+\_\+t} & engine\+\_\+tim\+\_\+t instance \\
\hline
{\em picture\+\_\+tim\+\_\+t} & picture\+\_\+tim\+\_\+t instance \\
\hline
\end{DoxyParams}
\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{struct_p_i_c_t_u_r_e___t_i_m}{P\+I\+C\+T\+U\+R\+E\+\_\+\+T\+IM}} 

\mbox{\hyperlink{struct_e_n_g_i_n_e___t_i_m}{E\+N\+G\+I\+N\+E\+\_\+\+T\+IM}} 
\end{DoxySeeAlso}
